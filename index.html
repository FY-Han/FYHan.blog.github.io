<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://fyhan.blog.github.io/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Fengyang Han">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://FYHan.blog.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-周报-2022-4-Quarter-2022-12-26-Weekly-blog" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/26/%E5%91%A8%E6%8A%A5-2022-4-Quarter-2022-12-26-Weekly-blog/" class="article-date">
  <time class="dt-published" datetime="2022-12-26T15:48:55.000Z" itemprop="datePublished">2022-12-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/26/%E5%91%A8%E6%8A%A5-2022-4-Quarter-2022-12-26-Weekly-blog/">Weekly blog</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="12-25"><a href="#12-25" class="headerlink" title="12.25"></a>12.25</h2><p>科研配色（模仿的Viridis配色）</p>
<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212261032947.png"/>

<p>vscode主题，monokai，暗色，因为light attracts bugs</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fyhan.blog.github.io/2022/12/26/%E5%91%A8%E6%8A%A5-2022-4-Quarter-2022-12-26-Weekly-blog/" data-id="clc4z8jvk001obwv2cneqgjpl" data-title="Weekly blog" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%91%A8%E6%8A%A5/" rel="tag">周报</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-周报-2022-4-Quarter-2022-12-23-Weekly-blog" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/23/%E5%91%A8%E6%8A%A5-2022-4-Quarter-2022-12-23-Weekly-blog/" class="article-date">
  <time class="dt-published" datetime="2022-12-23T16:09:34.000Z" itemprop="datePublished">2022-12-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/23/%E5%91%A8%E6%8A%A5-2022-4-Quarter-2022-12-23-Weekly-blog/">Weekly blog</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="23号"><a href="#23号" class="headerlink" title="23号"></a>23号</h2><p>分别是100ns-600ns的整体RMSD</p>
<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212231114216.png"/>

<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212231114403.png"/>

<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212231113209.png"/>

<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212231112439.png"/>

<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212231111788.png"/>

<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212231110322.png"/>

<h3 id="使用hole软件看氨基酸效果"><a href="#使用hole软件看氨基酸效果" class="headerlink" title="使用hole软件看氨基酸效果"></a>使用hole软件看氨基酸效果</h3><h4 id="使用hole获取每一帧的半径，然后计算半径的开合状态"><a href="#使用hole获取每一帧的半径，然后计算半径的开合状态" class="headerlink" title="使用hole获取每一帧的半径，然后计算半径的开合状态"></a>使用hole获取每一帧的半径，然后计算半径的开合状态</h4><p>HOLE 现在还可以从CHARMm .DCD 格式的二进制轨迹文件中读取</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">coord 1grm_single.pdb           ! Co-ordinates in pdb format</span><br><span class="line">radius ~/hole2/rad/simple.rad   ! Use simple AMBER vdw radii</span><br><span class="line">                                ! n.b. can use ~ in hole</span><br><span class="line">!</span><br><span class="line">! now optional cards</span><br><span class="line">sphpdb hole_out.sph             ! pdb format output of hole sphere centre info</span><br><span class="line">                                ! (for use in sph_process program)</span><br><span class="line">endrad 5.                       ! This is the pore radius that is taken</span><br><span class="line">                                ! as where channel ends. 5.0 Angstroms is good</span><br><span class="line">                                ! for a narrow channel</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>1chb.pdb样本</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">! run on cholera toxin</span><br><span class="line">coord 02_1chb.pdb</span><br><span class="line">! n.b. no cpoint cvect specified - use new automated procedure to find</span><br><span class="line">radius ~/hole2/rad/simple.rad</span><br><span class="line">ignore hoh tip wat                              ! ignore all atoms from waters</span><br><span class="line">conn                                            ! use new connolly`</span><br><span class="line">shorto 2                                        ! short output</span><br><span class="line">sphpdb 1chb_conn.sph</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">! 2nd example a more complex hole run on maltoporin</span><br><span class="line">!</span><br><span class="line">! first use standard spherical probe</span><br><span class="line">coord  03_1af6.pdb</span><br><span class="line">radius ~/hole2/rad/simple.rad   ! Use simple AMBER vdw radii</span><br><span class="line">!</span><br><span class="line">! now optional cards</span><br><span class="line">sphpdb spherical.sph            ! standard hole spherical probe in this run</span><br><span class="line">ignore FRU GLC MG HOH           ! ignore all water, MG ions and sugars in the structure</span><br><span class="line">cvect 0.0 0.0 1.0               ! channel runs in Z direction</span><br><span class="line">! this structure is a trimer - the automatic HOLE guess procedure</span><br><span class="line">! fails to find a point in one of the three channels.</span><br><span class="line">! so overide with a CPOINT card - in this case use an atom</span><br><span class="line">! from one of the sugars bound in the channel:</span><br><span class="line">!HETATM 6858  C1  GLC B   1     -14.285  47.809  82.707  1.00 52.56           C</span><br><span class="line">cpoint -14.285  47.809  82.707</span><br></pre></td></tr></table></figure>



<h3 id="使用github做增量备份"><a href="#使用github做增量备份" class="headerlink" title="使用github做增量备份"></a>使用github做增量备份</h3><p>设置linux ssh登录其他账户不用密码</p>
<h2 id="24"><a href="#24" class="headerlink" title="24"></a>24</h2><h3 id="eef任务"><a href="#eef任务" class="headerlink" title="eef任务"></a>eef任务</h3><h4 id="用不同的gpu跑2346的结果"><a href="#用不同的gpu跑2346的结果" class="headerlink" title="用不同的gpu跑2346的结果"></a>用不同的gpu跑2346的结果</h4><p>amberhome在 panda的 &#x2F;home3&#x2F;jwang&#x2F;software</p>
<h5 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h5><p>libcudart.so.8.0: cannot open shared object file: No such file or directory <a target="_blank" rel="noopener" href="https://github.com/BVLC/caffe/issues/4944">解决方案</a>, 查到用的是cuda-9.2</p>
<p><img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/20221224124545.png"></p>
<p>因此装一个cudatoolkit-8.0</p>
<h4 id="用vmd检查md的结果，是否配体通过了通道"><a href="#用vmd检查md的结果，是否配体通过了通道" class="headerlink" title="用vmd检查md的结果，是否配体通过了通道"></a>用vmd检查md的结果，是否配体通过了通道</h4><h3 id="GaMD任务"><a href="#GaMD任务" class="headerlink" title="GaMD任务"></a>GaMD任务</h3><h4 id="跑长时间MD"><a href="#跑长时间MD" class="headerlink" title="跑长时间MD"></a>跑长时间MD</h4><h4 id="仿照老师的脚本改写，计算半径随时间的变化"><a href="#仿照老师的脚本改写，计算半径随时间的变化" class="headerlink" title="仿照老师的脚本改写，计算半径随时间的变化"></a>仿照老师的脚本改写，计算半径随时间的变化</h4><p>脚本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/csh</span><br><span class="line"># calcualte the offset</span><br><span class="line">@ id=1</span><br><span class="line">rm -f center_offset.out</span><br><span class="line">touch center_offset.out</span><br><span class="line">while ($id &lt;= 4001)</span><br><span class="line">        if( ! -e snapshot/snapshot.$id) then</span><br><span class="line">                break</span><br><span class="line">        endif</span><br><span class="line">        pdbextract -i def_mscl.in -p ./snapshot/snapshot.$id -o TMP1.pdb</span><br><span class="line">        grep &quot;P31&quot; ./snapshot/snapshot.$id &gt; TMP2.pdb</span><br><span class="line"></span><br><span class="line">        set ctr1=`translate -i TMP1.pdb -f pdb -c check | grep &quot;center&quot; | sed &#x27;s/,//g&#x27; |sed &#x27;s/The molecule center is at://&#x27;`</span><br><span class="line">        set ctr2=`translate -i TMP2.pdb -f pdb -c check | grep &quot;center&quot; | sed &#x27;s/,//g&#x27; |sed &#x27;s/The molecule center is at://&#x27;`</span><br><span class="line">        echo -- $id --</span><br><span class="line">        echo $id $ctr1 $ctr2 &gt;&gt; center_offset.out</span><br><span class="line">        @ id=$id + 1</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">awk -f awk_center_offset.in center_offset.out &gt; center_offset.sum</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>MscL的孔径可达30-40A</p>
<h5 id="选择到最低的TM1区域的氨基酸"><a href="#选择到最低的TM1区域的氨基酸" class="headerlink" title="选择到最低的TM1区域的氨基酸"></a>选择到最低的TM1区域的氨基酸</h5><p><img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/20221225003808.png"></p>
<p>单链的结构</p>
<p><img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/20221225003901.png" alt="https://journals.asm.org/doi/full/10.1128/MMBR.00055-19"></p>
<p>TM1（残基 15-45）和 TM2（残基 76-100）<a target="_blank" rel="noopener" href="https://link.springer.com/article/10.1007/s00249-009-0460-y">1</a></p>
<p><img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/20221225005330.png"></p>
<p>看起来下面没问题，上面有问题</p>
<h5 id="计算五个的几何平均点，并计算半径，"><a href="#计算五个的几何平均点，并计算半径，" class="headerlink" title="计算五个的几何平均点，并计算半径，"></a>计算五个的几何平均点，并计算半径，</h5><h5 id="计算轨迹中的半径变化"><a href="#计算轨迹中的半径变化" class="headerlink" title="计算轨迹中的半径变化"></a>计算轨迹中的半径变化</h5>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fyhan.blog.github.io/2022/12/23/%E5%91%A8%E6%8A%A5-2022-4-Quarter-2022-12-23-Weekly-blog/" data-id="clc4z8jvj001nbwv2gk0t6pd6" data-title="Weekly blog" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%91%A8%E6%8A%A5/" rel="tag">周报</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-test" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/21/test/" class="article-date">
  <time class="dt-published" datetime="2022-12-21T05:45:55.476Z" itemprop="datePublished">2022-12-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fyhan.blog.github.io/2022/12/21/test/" data-id="clc4z8ju20000bwv28w2r0z34" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Git版本控制" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/15/Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" class="article-date">
  <time class="dt-published" datetime="2022-12-16T00:24:02.000Z" itemprop="datePublished">2022-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/15/Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/">Git版本控制</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fyhan.blog.github.io/2022/12/15/Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" data-id="clc4z8juj0002bwv24xlm5ghn" data-title="Git版本控制" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-科研-CRC-1-basic" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/15/%E7%A7%91%E7%A0%94-CRC-1-basic/" class="article-date">
  <time class="dt-published" datetime="2022-12-15T18:41:23.308Z" itemprop="datePublished">2022-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="CRC-Tutorial"><a href="#CRC-Tutorial" class="headerlink" title="CRC Tutorial"></a>CRC Tutorial</h1><h2 id="要求交互式的gpu"><a href="#要求交互式的gpu" class="headerlink" title="要求交互式的gpu"></a>要求交互式的gpu</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module load gcc/8.2.0 openmpi/4.0.3</span><br><span class="line">module load amber/22</span><br><span class="line"></span><br><span class="line">crc-interactive.py -g -t 12 -n 1 -c 1 -p gtx1080</span><br><span class="line">crc-interactive.py -g -t 12 -n 1 -c 1 -p a100_nvlink</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h2><h3 id="hardware-overview"><a href="#hardware-overview" class="headerlink" title="hardware overview"></a>hardware overview</h3><h4 id="SMP-h2p-crc-pitt-edu"><a href="#SMP-h2p-crc-pitt-edu" class="headerlink" title="SMP(h2p.crc.pitt.edu)"></a>SMP(h2p.crc.pitt.edu)</h4><p>Symmetric MultiProcessing for single core simulation用于单核仿真的对称多处理</p>
<p>100 nodes of 24-core Xeon Gold 6126 2.60 GHz (Skylake)</p>
<p>24 nodes of 12-core Xeon E5-2643v4 3.40 GHz (Broadwell)</p>
<p>2 nodes of 12-core Xeon E5-2643v4 3.40 GHz (Broadwell)</p>
<p>2 nodes of 12-core Xeon E5-2643v4 3.40 GHz (Broadwell)</p>
<p>1 node of 12-core Xeon E5-2643v4 3.40 GHz (Broadwell)</p>
<h4 id="MPI-h2p-crc-pitt-edu"><a href="#MPI-h2p-crc-pitt-edu" class="headerlink" title="MPI(h2p.crc.pitt.edu)"></a>MPI(h2p.crc.pitt.edu)</h4><p>need multi core simulation需要多核仿真</p>
<ul>
<li><p>32 nodes of 20-core(E5-2660 v3)2.6 GHz (Haswell)</p>
</li>
<li><p>88 nodes of 16-core Xeon CPU E5-2670 2.60GHz (Sandy Bridge)</p>
</li>
<li><p>23 nodes of 64-core AMD Opteron Processor 6276 2.30 GHz</p>
</li>
<li><p>96 nodes of 28-core Xeon E5-2690 2.60 GHz (Broadwell)</p>
</li>
</ul>
<h4 id="GPU-h2p-crc-pitt-edu"><a href="#GPU-h2p-crc-pitt-edu" class="headerlink" title="GPU(h2p.crc.pitt.edu)"></a>GPU(h2p.crc.pitt.edu)</h4><p>7 nodes with 4 NVIDIA Titan X GPGPUs&#x2F;node</p>
<p>18 nodes with 4 NVIDIA GeForce GTX 1080 GPGPUnode</p>
<p>1 node with 2 NVIDIA K40 GPGPUs</p>
<p>6 nodes with 2 Titan GPGPUs&#x2F;node</p>
<h4 id="HTC-htc-sam-pitt-edu"><a href="#HTC-htc-sam-pitt-edu" class="headerlink" title="HTC(htc.sam.pitt.edu)"></a>HTC(htc.sam.pitt.edu)</h4><p>for biostat</p>
<ul>
<li><p>4 nodes of 24-core Xeon Gold 6126 2.60 GHz(Skylake)</p>
</li>
<li><p>20 nodes of 16-core Intel Xeon E5-2630v3.2.4GHz (Haswell-EP)</p>
</li>
</ul>
<h3 id="storage"><a href="#storage" class="headerlink" title="storage"></a>storage</h3><h4 id="x2F-ihome-75GB-x2F-user"><a href="#x2F-ihome-75GB-x2F-user" class="headerlink" title="&#x2F;ihome 75GB&#x2F;user"></a>&#x2F;ihome 75GB&#x2F;user</h4><p>backed up, can be recovered</p>
<h4 id="ix-system-5-Terrabyte-x2F-group"><a href="#ix-system-5-Terrabyte-x2F-group" class="headerlink" title="ix system 5 Terrabyte &#x2F;group"></a>ix system 5 Terrabyte &#x2F;group</h4><h4 id="service"><a href="#service" class="headerlink" title="service"></a>service</h4><p>each PI have 10,000 core hours&#x2F;service units</p>
<p><img src="/1.basic/image-20220826160826726.png" alt="image-20220826160826726"></p>
<h3 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h3><h4 id="用xshell"><a href="#用xshell" class="headerlink" title="用xshell"></a>用xshell</h4><h4 id="使用ssh命令-参考"><a href="#使用ssh命令-参考" class="headerlink" title="使用ssh命令(参考)"></a>使用ssh命令(<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/how-to-set-up-ssh-keys-on-linux-unix/">参考</a>)</h4><h5 id="在User的-ssh下建立config文件-添加如下内容"><a href="#在User的-ssh下建立config文件-添加如下内容" class="headerlink" title="在User的.ssh下建立config文件, 添加如下内容"></a>在User的.ssh下建立config文件, 添加如下内容</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host h2p //alias</span><br><span class="line">HostName login1.crc.pitt.edu //domain</span><br><span class="line">FowardX11 <span class="built_in">yes</span></span><br><span class="line">User feh34 //username</span><br><span class="line">IdentityFile ~/.ssh/id_rsa_自定义名字</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="建立密钥，并将公钥保存到服务器，省的每次都输入密码"><a href="#建立密钥，并将公钥保存到服务器，省的每次都输入密码" class="headerlink" title="建立密钥，并将公钥保存到服务器，省的每次都输入密码"></a>建立密钥，并将公钥保存到服务器，省的每次都输入密码</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br><span class="line">id_rsa_h2p</span><br><span class="line">ssh-copy-id -i ~/.ssh/id_rsa_h2p.pub h2p</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="文件传输"><a href="#文件传输" class="headerlink" title="文件传输"></a>文件传输</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp crc:文件路径 <span class="comment">//取到本地</span></span><br><span class="line"></span><br><span class="line">scp 文件路径 crc: ~/. <span class="comment">//储存路径 文件传输加参数-r</span></span><br></pre></td></tr></table></figure>

<h5 id="Globus中间传输"><a href="#Globus中间传输" class="headerlink" title="Globus中间传输"></a>Globus中间传输</h5><p>login 传文件, 一个entpoint:pitt#dtn, 另一个 </p>
<h3 id="Software-available"><a href="#Software-available" class="headerlink" title="Software available"></a>Software available</h3><h4 id="Lmod"><a href="#Lmod" class="headerlink" title="Lmod"></a>Lmod</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module avail <span class="comment">//what&#x27;s available in brief list</span></span><br><span class="line">module spider <span class="comment">//detailed availablilty of module and can search when name provided</span></span><br><span class="line">module load &lt;name&gt; <span class="comment">//load module(s)</span></span><br><span class="line">module purge <span class="comment">//unload all module</span></span><br><span class="line">module <span class="built_in">list</span> <span class="comment">//list loaded modules</span></span><br></pre></td></tr></table></figure>

<p>免去了compile的烦恼</p>
<h3 id="Slurm-workload-manager"><a href="#Slurm-workload-manager" class="headerlink" title="Slurm workload manager"></a>Slurm workload manager</h3><table>
<thead>
<tr>
<th align="left">Command</th>
<th>Slurm</th>
<th>PBS&#x2F;Torque</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Job Submission</td>
<td>sbatch job_script</td>
<td>qsub job_script</td>
</tr>
<tr>
<td align="left"></td>
<td>sbatch -partition&#x3D;queue -nodes&#x3D;1 -cpus-per-node&#x3D;16 -mem&#x3D;64g job script</td>
<td>qsub -q queue -l nodes&#x3D;1:ppn&#x3D;16 -l mem&#x3D;64g job script</td>
</tr>
<tr>
<td align="left">Node count</td>
<td>-nodes&#x3D;1</td>
<td>-l nodes&#x3D;count</td>
</tr>
<tr>
<td align="left">Cores per node</td>
<td>-cpu-per-node&#x3D;count</td>
<td>-l ppn&#x3D;count</td>
</tr>
<tr>
<td align="left">Memory size</td>
<td>-mem&#x3D;16g</td>
<td>-l mem&#x3D;16384</td>
</tr>
<tr>
<td align="left">Wall clock limit</td>
<td>-t days-hh:mm:ss</td>
<td>-l walltime&#x3D;hh:mm:ss</td>
</tr>
<tr>
<td align="left">Job name</td>
<td>-job-name&#x3D;name</td>
<td>-N name</td>
</tr>
</tbody></table>
<h4 id="multifactor-priority"><a href="#multifactor-priority" class="headerlink" title="multifactor priority"></a>multifactor priority</h4><p>AGE, fairshare, jobsize(larger are prioritized), partition(unused), QoS(Quality of Service, short max 1 day -2, normal max 3 days in queue -1, long max 6 days in queue -0), generic esorces(more gpus are prioritized)</p>
<h4 id="partitions-and-hardware-sinfo"><a href="#partitions-and-hardware-sinfo" class="headerlink" title="partitions and hardware(sinfo)"></a>partitions and hardware(sinfo)</h4><ul>
<li>Cluster:gpu<br>PARTITION:gtx1080(default)<br>PARTITION:titanx<br>PARTITION:k40<br>PARTITION:titan</li>
<li>CLUSTER:mpi<br>PARTITION:opa(default)<br>PARTITION:ib<br>PARTITION:legacy<br>PARTITION:compbio(limited to Computational Biology)</li>
<li>CLUSTER:smp<br>PARTITION:smp(defaul<br>PARTITION:high-mem</li>
</ul>
<h4 id="State"><a href="#State" class="headerlink" title="State"></a>State</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">crc-sinfo.py //查看各node使用情况</span><br><span class="line">crc-squeue.py //查看自己的计算任务提交情况</span><br><span class="line">crc-usage.py //查看组里资源使用情况,to check out who is the biggest user so as to comete haha</span><br></pre></td></tr></table></figure>

<p>mix alloc (不可用 ) drain（under maintance or frozen) idle down</p>
<h5 id="查看详细信息"><a href="#查看详细信息" class="headerlink" title="查看详细信息"></a>查看详细信息</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">squeue //找到序列号</span><br><span class="line">squeue -M ,pi</span><br><span class="line">scontrol -M clustername(smp, gpu,htc:q</span><br><span class="line">,mpi) show job job_number</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>scontrol</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">PartitionName=gtx1080</span><br><span class="line">   AllowGroups=ALL AllowAccounts=ALL AllowQos=short,normal,long,gpu-gtx1080-s,gpu-gtx1080-n,gpu-gtx1080-l,gpu-gtx1080-s-invest,gpu-gtx1080-n-invest,gpu-gtx1080-l-invest</span><br><span class="line">   AllocNodes=ALL Default=NO QoS=N/A</span><br><span class="line">   DefaultTime=NONE DisableRootJobs=NO ExclusiveUser=NO GraceTime=0 Hidden=NO</span><br><span class="line">   MaxNodes=4 MaxTime=UNLIMITED MinNodes=0 LLN=NO MaxCPUsPerNode=UNLIMITED</span><br><span class="line">   Nodes=gpu-n[17-25]</span><br><span class="line">   PriorityJobFactor=1 PriorityTier=1 RootOnly=NO ReqResv=NO OverSubscribe=NO</span><br><span class="line">   OverTimeLimit=NONE PreemptMode=OFF</span><br><span class="line">   State=UP TotalCPUs=72 TotalNodes=9 SelectTypeParameters=NONE</span><br><span class="line">   JobDefaults=(null)</span><br><span class="line">   DefMemPerNode=UNLIMITED MaxMemPerNode=UNLIMITED</span><br><span class="line">   TRES=cpu=72,mem=855000M,node=9,billing=36,gres/gpu=36</span><br><span class="line">   TRESBillingWeights=CPU=0.0,Mem=0.0G,GRES/gpu=1.0</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="CRC-wrapper"><a href="#CRC-wrapper" class="headerlink" title="CRC-wrapper"></a>CRC-wrapper</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">crc-interactive.py	//Open an interactive session 说明flag,最长在线等待12h,</span><br><span class="line">crc-sinfo.py	//Show available resources on H2P</span><br><span class="line">crc-sus.py	//Show available SUs for a particular account</span><br><span class="line">crc-scancel.py	//Cancel a particular submitted job</span><br><span class="line">crc-squeue.py	//Show all of your submitted jobs</span><br><span class="line">crc-usage.py	//Your account SUs usage on H2P</span><br></pre></td></tr></table></figure>

<p>使用</p>
<h4 id="对于不同的软件的更多的命令帮助"><a href="#对于不同的软件的更多的命令帮助" class="headerlink" title="对于不同的软件的更多的命令帮助"></a>对于不同的软件的更多的命令帮助</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[feh34@login1 ~]$ cd /ihome/crc/how_to_run/</span><br><span class="line">[feh34@login1 how_to_run]$ ls</span><br><span class="line">abaqus            febio        lumerical        pbdr</span><br><span class="line">abm               fluent       lumerical.test   psi4</span><br><span class="line">amber             gamess       lumerical.test2  qchem</span><br><span class="line">ansys             gaussian     matlab           quantumespresso</span><br><span class="line">bioeng2370_2021f  gpaw         molecularGSM     r</span><br><span class="line">blender           gromacs      molpro           sas</span><br><span class="line">comsol            hello-world  mopac            stata</span><br><span class="line">cp2k              hfss         mosek            tinker</span><br><span class="line">damask            ipc          namd             turbomole</span><br><span class="line">DeepLabCut-1.02   julia        nektar++         vasp</span><br><span class="line">deformetrica      lammps       openfoam         westpa</span><br><span class="line">fdtd              lightgbm     orca             xilinx</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>不知为何, 取消任务要使用crc-scancel.py 而不能使用scancel, 虽然tab也能补全</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fyhan.blog.github.io/2022/12/15/%E7%A7%91%E7%A0%94-CRC-1-basic/" data-id="clc4z8juy000obwv20ein6qpd" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-科研-分子模拟-AMBER-2022-12-15-amd-01" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/15/%E7%A7%91%E7%A0%94-%E5%88%86%E5%AD%90%E6%A8%A1%E6%8B%9F-AMBER-2022-12-15-amd-01/" class="article-date">
  <time class="dt-published" datetime="2022-12-15T18:33:00.000Z" itemprop="datePublished">2022-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/15/%E7%A7%91%E7%A0%94-%E5%88%86%E5%AD%90%E6%A8%A1%E6%8B%9F-AMBER-2022-12-15-amd-01/">amd-01</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>因为gamd的图很怪，所以自己先跑一个amd试试，因为注意到reweighting的方式是一样的，都是用二面角啥啥的。</p>
<p>此外，run.sh的2D下面两个都有和1D一样的报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">main()</span><br><span class="line">  File &quot;/data1/feh34/Documents/3.MD/3.GaMD/1.mscl/2.GaMD_with_lipid/2.result/1.GaMD_mscl/PyReweighting-1D.py&quot;, line 147, in main</span><br><span class="line">    hist, newedgesX = np.histogram(data, bins = binsX, weights=weights)</span><br><span class="line">  File &quot;&lt;__array_function__ internals&gt;&quot;, line 180, in histogram</span><br><span class="line">  File &quot;/opt/anaconda3/envs/py3.9/lib/python3.9/site-packages/numpy/lib/histograms.py&quot;, line 791, in histogram</span><br><span class="line">    a, weights = _ravel_and_check_weights(a, weights)</span><br><span class="line">  File &quot;/opt/anaconda3/envs/py3.9/lib/python3.9/site-packages/numpy/lib/histograms.py&quot;, line 297, in _ravel_and_check_weights</span><br><span class="line">    raise ValueError(</span><br><span class="line">ValueError: weights should have the same shape as a.</span><br></pre></td></tr></table></figure>

<p>首先处理小分子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; leaprc.protein.ff14SB</span><br><span class="line">&gt; loadOff solvents.lib</span><br><span class="line">&gt; loadOff tip4pbox.off</span><br><span class="line">&gt; loadOff tip4pewbox.off</span><br><span class="line">&gt; loadamberparams frcmod.tip4pew #loadOff不行</span><br></pre></td></tr></table></figure>

<p>提示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Adds counterions in a shell around _unit_ using a Coulombic potential on a grid. If _#ion1_ is 0, the _unit_ is neutralized (_ion1_ must be opposite in charge to _unit_, and _ion2_ cannot be specified). Otherwise,the specified numbers of _ion1_ [_ion2_] are added [in alternating order]. If solvent is present, it is ignored in the charge and steric calculations, and if an ion has a steric conflict with a solvent molecule, the ion is moved to the center of said molecule, and the latter is deleted. (To avoid this behavior, either solvate _after_ addIons, or use addIons2.) Ions must be monoatomic. Note that the one-at-a-time procedure is not</span><br><span class="line">guaranteed to globally minimize the electrostatic energy. When neutralizing</span><br><span class="line">regular-backbone nucleic acids, the first cations will generally be added</span><br><span class="line">between phosphates, leaving the final two ions to be placed somewhere around</span><br><span class="line">the middle of the molecule.</span><br><span class="line">The default grid resolution is 1 Angstrom, extending from an inner radius</span><br><span class="line">of (max ion size + max solute atom size) to an outer radius 4 Angstroms</span><br><span class="line">beyond. A distance-dependent dielectric is used for speed.</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://fyhan.blog.github.io/2022/12/15/%E7%A7%91%E7%A0%94-%E5%88%86%E5%AD%90%E6%A8%A1%E6%8B%9F-AMBER-2022-12-15-amd-01/" data-id="clc4z8jvl001rbwv2dnk325p2" data-title="amd-01" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AMBER/" rel="tag">AMBER</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-周报-2022-4-Quarter-2022-12-12-Weekly-blog" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/12/%E5%91%A8%E6%8A%A5-2022-4-Quarter-2022-12-12-Weekly-blog/" class="article-date">
  <time class="dt-published" datetime="2022-12-12T05:29:07.000Z" itemprop="datePublished">2022-12-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/12/%E5%91%A8%E6%8A%A5-2022-4-Quarter-2022-12-12-Weekly-blog/">Weekly blog</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="12-12"><a href="#12-12" class="headerlink" title="12-12"></a>12-12</h1><p>好久不见，重新部署回来。</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/35668237">参考教程</a>, hexo next 主题白屏<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45178128/article/details/121230175">解决方案</a>,<a target="_blank" rel="noopener" href="https://tohugo.com/2021/01/26/%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/Hexo%E6%B7%BB%E5%8A%A0%E5%88%86%E7%B1%BB%E5%8F%8A%E6%A0%87%E7%AD%BE%EF%BC%88%E5%9C%A8Next%E4%B8%BB%E9%A2%98%E4%B8%8B%EF%BC%89/">识别tag</a></p>
<p><a target="_blank" rel="noopener" href="https://neveryu.github.io/2016/09/30/hexo-next-two/">Next扩展功能</a></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p><code>EPERM: operation not permitted, unlink xxx</code></p>
<p>关闭诸如vscode的IDE编辑器</p>
<p><code>只有文本没有主题</code></p>
<p>因为_config.yml的url里，<a target="_blank" rel="noopener" href="https://blog.csdn.net/GQ_Sonofgod/article/details/119349705">不是根目录</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span><br><span class="line">url: http://example.com</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>localhost:4000的显示没问题，但是hexo s到github上主题不显示，tag不更新。怀疑与此前的配置有关。</p>
<p>Dell还没回来</p>
<h2 id="12-21"><a href="#12-21" class="headerlink" title="12.21"></a>12.21</h2><p>实际上一步一步记录过程就有了</p>
<p>以为不能生成视频，卡了我很久，实际上就是选择（pdb，crd）选择（parm7，coordinate，perodic coordinate）选择（coordinate，netcdf）几种之间。</p>
<p>不能重新生成视频</p>
<p>parm7读入prmtop文件没有蛋白质盒子显示，frame&#x3D;0，但有atoms</p>
<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212202325117.png"/>

<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212202326161.png"/>

<p>继续操作轨迹文件默认为二进制</p>
<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212202333016.png"/>

<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212202333481.png"/>

<p>说明不能读，使用netcdf格式读</p>
<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/typora/202212202334061.png"/>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fyhan.blog.github.io/2022/12/12/%E5%91%A8%E6%8A%A5-2022-4-Quarter-2022-12-12-Weekly-blog/" data-id="clc4z8jvi001lbwv2h6dkhjds" data-title="Weekly blog" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%91%A8%E6%8A%A5/" rel="tag">周报</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/11/hello-world/" class="article-date">
  <time class="dt-published" datetime="2022-12-12T02:02:00.845Z" itemprop="datePublished">2022-12-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/11/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fyhan.blog.github.io/2022/12/11/hello-world/" data-id="clc4z8juk0003bwv2h5pn5m4l" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-科研-环境配置-杂记1" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/11/%E7%A7%91%E7%A0%94-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-%E6%9D%82%E8%AE%B01/" class="article-date">
  <time class="dt-published" datetime="2022-12-12T01:43:07.000Z" itemprop="datePublished">2022-12-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/11/%E7%A7%91%E7%A0%94-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-%E6%9D%82%E8%AE%B01/">Weekly blog</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="WangLab-工作环境配置"><a href="#WangLab-工作环境配置" class="headerlink" title="WangLab 工作环境配置"></a>WangLab 工作环境配置</h1><p>因为使用rocky系统，需要重新装amber依赖环境。</p>
<h2 id="Rule-of-Thumb"><a href="#Rule-of-Thumb" class="headerlink" title="Rule of Thumb"></a>Rule of Thumb</h2><p>Linux需要经常update system以保证有最新的系统安装包。更新Rocky Linux使用命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf update -y</span><br><span class="line">sudo dnf clean all</span><br></pre></td></tr></table></figure>

<p>检查rocky或者redhat-based 是否有“development tools”包, 没有就安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf group list</span><br></pre></td></tr></table></figure>

<p>一个make的tip<code>make -j $(nproc)</code></p>
<p>经验教训就是跟着官网走, 确实可以自己一个一个问题解决, 但是往往官网已经给出了良好的配置和解决方法. 我找了半天为什么我安装了fftw 以及bzip等几个乱七八糟的还是说有问题, 最后根据官网的指引, 一口气安装了一堆东西, 就好了, 而自己一个一个解决反而不成功. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum -y install tcsh make \</span><br><span class="line">               gcc gcc-gfortran gcc-c++ \</span><br><span class="line">               <span class="built_in">which</span> flex bison patch bc \</span><br><span class="line">               libXt-devel libXext-devel \</span><br><span class="line">               perl perl-ExtUtils-MakeMaker util-linux wget \</span><br><span class="line">               bzip2 bzip2-devel zlib-devel tar</span><br></pre></td></tr></table></figure>

<p>make install后如果停了在处理,需要make clean一下</p>
<p>进一步的潜在问题是, 因为我使用的是centos 8的配置,因为不一定和rocky一致, 因此可能需要重新处理一遍. </p>
<p>果然报错了</p>
<h3 id="error-while-loading-shared-libraries-xxx-so-cannot-open-shared-object-file-No-such-file-or-directory"><a href="#error-while-loading-shared-libraries-xxx-so-cannot-open-shared-object-file-No-such-file-or-directory" class="headerlink" title="error while loading shared libraries: xxx.so cannot open shared object file: No such file or directory"></a>error while loading shared libraries: xxx.so cannot open shared object file: No such file or directory</h3><p>因为Linux默认去系统路径<code>/usr/local/lib</code>下搜索动态库，但是不知道什么原因，我们新更新的动态链接库并不在其中，因此需要指定其位置。</p>
<ul>
<li>一种方法是将内容手动移过去，需要root权限并且迟早需要删除，不利于简便调试</li>
<li>另一种方法是使用环境变量：.bashrc, 将动态链接所在文件添加到<code>LD_LIBRARY_PATH</code>下，<code>export LD_LIBRARY_PATH=$(pwd)</code>, 同时注意加到前面，这样找到了就停止，不会继续往后找<ul>
<li><p>所以解决方法是找到软件安装管理如rpm dnf的lib安装位置，指定他到<code>LD_LIBRARY_PATH</code></p>
</li>
<li><p>使用</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dnf seach PACKAGE-NAME <span class="comment">//查找是否有</span></span><br><span class="line">dnf info PACKAGE-NAME	<span class="comment">//查找详细信息</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="疑似centos与amber22不兼容"><a href="#疑似centos与amber22不兼容" class="headerlink" title="疑似centos与amber22不兼容"></a>疑似centos与amber22不兼容</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cuda没动</span><br><span class="line">libreadline-dev装了</span><br><span class="line">mkl 没有</span><br><span class="line"></span><br><span class="line">cmkae warning似乎不影响</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kmmd没有</span><br><span class="line">fftw?</span><br><span class="line">netcdf开始不能装，enable the PowerTools repo后装上了  <span class="comment">// bugzilla.redhat.com/show_bug.cgi?id=1756936</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p>incompatible prob, of path </p>
<p>一部分的报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-- **************************************************************************</span><br><span class="line">-- Starting configuration of Amber version 22.0.0...</span><br><span class="line">-- CMake Version: 3.20.2</span><br><span class="line">-- For how to use this build system, please read this wiki:</span><br><span class="line">--     http://ambermd.org/pmwiki/pmwiki.php/Main/CMake</span><br><span class="line">-- For a list of important CMake variables, check here:</span><br><span class="line">--     http://ambermd.org/pmwiki/pmwiki.php/Main/CMake-Common-Options</span><br><span class="line">-- **************************************************************************</span><br><span class="line">-- Amber source found, building AmberTools and Amber</span><br><span class="line">CUDA_TOOLKIT_ROOT_DIR not found or specified</span><br><span class="line">-- Could NOT find CUDA (missing: CUDA_TOOLKIT_ROOT_DIR CUDA_NVCC_EXECUTABLE CUDA_INCLUDE_DIRS CUDA_CUDART_LIBRARY)</span><br><span class="line">-- Miniconda is installed in the build directory!</span><br><span class="line">-- Found perl make: /usr/bin/make</span><br><span class="line">-- Perl modules well be installed to AMBERHOME/lib/perl</span><br><span class="line">-- ^[[1;34mRunning updater...^[[0m</span><br><span class="line">-- &gt;&gt;&gt; Preparing to apply updates... please wait.</span><br><span class="line">-- &gt;&gt;&gt; No new updates available for AmberTools 23</span><br><span class="line">-- &gt;&gt;&gt; No new updates available for Amber 24</span><br><span class="line">-- ^[[1;34mUpdater done.  If you want to install updates, then set the APPLY_UPDATES variable to true.^[[0m</span><br><span class="line">-- Checking whether to use built-in libraries...</span><br><span class="line">-- Looking for rl_initialize in libreadline.so</span><br><span class="line">-- Looking for rl_initialize in libreadline.so - found</span><br><span class="line">-- Found Readline: /usr/include</span><br><span class="line">-- Unable to locate MKL_HOME for your system.  To use MKL, set MKL_HOME to point to your MKL installation location.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>unable to locate MKL_HOME for your system</p>
<p>但是当我把压缩包里的东西重新放到opt下, 一步一步操作, 就可以了, 合理怀疑安装需要位置依赖</p>
<p>同时进一步参照薛定谔的路径配置以及yinlong miao的GaMD的tutorial材料配置了AMBERHOME, LDlibrary和PATH</p>
<p>最后work了\</p>
<p>不过实际上因为需要pmemd.cuda来做gamd, 不知道为啥wei不行, 因此只能提交给crc做</p>
<h2 id="amber16安装"><a href="#amber16安装" class="headerlink" title="amber16安装"></a>amber16安装</h2><p>然后再装amber16的时候有问题, 显示mix的语言编译问题,实际上是因为gcc和fortran的版本太高了, 并且要求使用python2. 于是使用anaconda做低版本python2,并且使用conda安装低版本gcc和fortran. </p>
<h2 id="amber18安装"><a href="#amber18安装" class="headerlink" title="amber18安装"></a>amber18安装</h2><h2 id="schrodinger-配置"><a href="#schrodinger-配置" class="headerlink" title="schrodinger 配置"></a>schrodinger 配置</h2><p><img src="/%E6%9D%82%E8%AE%B01/image-20220908140653738.png" alt="image-20220908140653738"></p>
<img src="https://raw.githubusercontent.com/FY-Han/imagebed/main/202212122336832.png"/>

<p>报错找不到东西</p>
<p>于是根据<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/48306849/lib-x86-64-linux-gnu-libz-so-1-version-zlib-1-2-9-not-found">介绍</a>，重新指定softlink<code>ln -s /lib/x86_64-linux-gnu/libz.so.1</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fyhan.blog.github.io/2022/12/11/%E7%A7%91%E7%A0%94-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-%E6%9D%82%E8%AE%B01/" data-id="clc4z8jv0000sbwv2f8zca62f" data-title="Weekly blog" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" rel="tag">环境配置</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-科研-分子模拟-AMBER-2022-10-19-Gamd-01" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/19/%E7%A7%91%E7%A0%94-%E5%88%86%E5%AD%90%E6%A8%A1%E6%8B%9F-AMBER-2022-10-19-Gamd-01/" class="article-date">
  <time class="dt-published" datetime="2022-10-19T14:10:54.000Z" itemprop="datePublished">2022-10-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/19/%E7%A7%91%E7%A0%94-%E5%88%86%E5%AD%90%E6%A8%A1%E6%8B%9F-AMBER-2022-10-19-Gamd-01/">Gamd-01</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Gamd-tutorial"><a href="#Gamd-tutorial" class="headerlink" title="Gamd tutorial"></a>Gamd tutorial</h2><p>跑tutorial的时候碰到一个small box问题,不知道是不是amber22特有的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gpu_neighbor_list_setup :: Small box detected, with &lt;= 2 cells in one or more</span><br><span class="line">                           dimensions.  The current GPU code has been deemed</span><br><span class="line">                           unsafe for these situations.  Please alter the</span><br><span class="line">                           cutoff to increase the number of hash cells, make</span><br><span class="line">                           use of the CPU code, or (if absolutely necessary)</span><br><span class="line">                           run pmemd.cuda with the -AllowSmallBox flag.  This</span><br><span class="line">                           behavior will be corrected in a forthcoming patch.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>因此需要额外加上一个flag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#SBATCH --job-name=Gamd_004</span></span><br><span class="line"><span class="comment">#SBATCH --output=Gamd_004.out</span></span><br><span class="line"><span class="comment">#SBATCH --error=Gamd_004.err</span></span><br><span class="line"><span class="comment">#SBATCH --time=0-00:10:00    ## 1-00:00:00</span></span><br><span class="line"><span class="comment">#SBATCH --mail-user=feh34@pitt.edu</span></span><br><span class="line"><span class="comment">#SBATCH --mail-type=END,FAIL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#SBATCH --nodes=1</span></span><br><span class="line"><span class="comment">#SBATCH --ntasks-per-node=1  ## 1 for gpu job; &lt;=24 for cpu job.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#SBATCH --cluster=gpu        ## gpu, smp</span></span><br><span class="line"><span class="comment">#SBATCH --partition=a100  ## gtx1080, titanx, v100, a100; smp.</span></span><br><span class="line"><span class="comment">#SBATCH --qos=short          ##long (3~6days), normal (1-3days), short (&lt;1day)</span></span><br><span class="line"><span class="comment">#SBATCH --gres=gpu:4         ## only for GPU jobs.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Load Modules</span></span><br><span class="line">module purge</span><br><span class="line">module load gcc/8.2.0 openmpi/4.0.3</span><br><span class="line">module load amber/22</span><br><span class="line"></span><br><span class="line"><span class="comment"># Executable</span></span><br><span class="line"></span><br><span class="line">pmemd.cuda -O -i md-restart.in -o md-2.out -p dip.top -c md-1.rst -r md-2.rst -x md-2.nc -AllowSmallBox</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="要求交互式的gpu"><a href="#要求交互式的gpu" class="headerlink" title="要求交互式的gpu"></a>要求交互式的gpu</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module load gcc/8.2.0 openmpi/4.0.3</span><br><span class="line">module load amber/22</span><br><span class="line"></span><br><span class="line">crc-interactive.py -g -t 12 -n 1 -c 1 -p gtx1080</span><br><span class="line">crc-interactive.py -g -t 12 -n 1 -c 1 -p a100_nvlink</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="进一步对MscL的GaMD"><a href="#进一步对MscL的GaMD" class="headerlink" title="进一步对MscL的GaMD"></a>进一步对MscL的GaMD</h2><p>pdb4amber不好用的时候，去安装目录下跑一下<code>./amber-interactive.py或者./amber.sh</code></p>
<h3 id="蛋白文件准备"><a href="#蛋白文件准备" class="headerlink" title="蛋白文件准备"></a>蛋白文件准备</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/540586173">Amber 分子动力学模拟 姜华组祖传MD流程</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pdb4amber -i ref_mscl_LIG_011PC_protein.pdb -o mscl_dry.pdb -p --dry --add-missing-atoms</span><br><span class="line">pdb4amber -i mscl_dry.pdb -o mscl_noH.pdb -y</span><br><span class="line">pdb4amber -i mscl_noH.pdb -o mscl_processed.pdb</span><br><span class="line">reduce mscl_processed.pdb &gt; mscl_h.pdb</span><br><span class="line">tleap </span><br><span class="line">source leaprc.protein.ff19SB</span><br><span class="line">source leaprc.water.tip3p</span><br><span class="line">pro = loadpdb mscl_processed.pdb</span><br></pre></td></tr></table></figure>

<p>注意</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Created a new atom named: OXT within residue: .R&lt;SER 136&gt;</span><br><span class="line">Created a new atom named: OXT within residue: .R&lt;SER 272&gt;</span><br><span class="line">Created a new atom named: OXT within residue: .R&lt;SER 408&gt;</span><br><span class="line">Created a new atom named: OXT within residue: .R&lt;SER 544&gt;</span><br></pre></td></tr></table></figure>

<p> 进一步使用check pdb，报了很多error</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Checking &#x27;pdb&#x27;....</span><br><span class="line"></span><br><span class="line">Warning: There is a bond of 50.478 angstroms between C and N atoms:</span><br><span class="line">-------  .R&lt;SER 136&gt;.A&lt;C 10&gt; and .R&lt;MET 137&gt;.A&lt;N 1&gt;</span><br><span class="line"></span><br><span class="line">Warning: There is a bond of 54.254 angstroms between C and N atoms:</span><br><span class="line">-------  .R&lt;SER 272&gt;.A&lt;C 10&gt; and .R&lt;MET 273&gt;.A&lt;N 1&gt;</span><br><span class="line"></span><br><span class="line">Warning: There is a bond of 57.792 angstroms between C and N atoms:</span><br><span class="line">-------  .R&lt;SER 408&gt;.A&lt;C 10&gt; and .R&lt;MET 409&gt;.A&lt;N 1&gt;</span><br><span class="line"></span><br><span class="line">Warning: There is a bond of 53.499 angstroms between C and N atoms:</span><br><span class="line">-------  .R&lt;SER 544&gt;.A&lt;C 10&gt; and .R&lt;MET 545&gt;.A&lt;N 1&gt;</span><br><span class="line">FATAL:  Atom .R&lt;SER 136&gt;.A&lt;OXT 12&gt; does not have a type.</span><br><span class="line">FATAL:  Atom .R&lt;SER 272&gt;.A&lt;OXT 12&gt; does not have a type.</span><br><span class="line">FATAL:  Atom .R&lt;SER 408&gt;.A&lt;OXT 12&gt; does not have a type.</span><br><span class="line">FATAL:  Atom .R&lt;SER 544&gt;.A&lt;OXT 12&gt; does not have a type.</span><br><span class="line"></span><br><span class="line">Warning: Close contact of 1.153 angstroms between nonbonded atoms HD22 and HG</span><br><span class="line">-------  .R&lt;ASN 81&gt;.A&lt;HD22 12&gt; and .R&lt;SER 579&gt;.A&lt;HG 9&gt;</span><br><span class="line"></span><br><span class="line">Warning: Close contact of 1.265 angstroms between nonbonded atoms C and OXT</span><br><span class="line">-------  .R&lt;SER 136&gt;.A&lt;C 10&gt; and .R&lt;SER 136&gt;.A&lt;OXT 12&gt;</span><br><span class="line"></span><br><span class="line">Warning: Close contact of 1.265 angstroms between nonbonded atoms C and OXT</span><br><span class="line">-------  .R&lt;SER 272&gt;.A&lt;C 10&gt; and .R&lt;SER 272&gt;.A&lt;OXT 12&gt;</span><br><span class="line"></span><br><span class="line">Warning: Close contact of 1.239 angstroms between nonbonded atoms C and OXT</span><br><span class="line">-------  .R&lt;SER 408&gt;.A&lt;C 10&gt; and .R&lt;SER 408&gt;.A&lt;OXT 12&gt;</span><br><span class="line"></span><br><span class="line">Warning: Close contact of 1.270 angstroms between nonbonded atoms C and OXT</span><br><span class="line">-------  .R&lt;SER 544&gt;.A&lt;C 10&gt; and .R&lt;SER 544&gt;.A&lt;OXT 12&gt;</span><br><span class="line">Checking parameters for unit &#x27;pdb&#x27;.</span><br><span class="line">Checking for bond parameters.</span><br><span class="line">Checking for angle parameters.</span><br><span class="line">check:  Errors:  4   Warnings: 9</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>导出参数进一步检查</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">saveamberparm pro mscl_pro.prmtop mscl_pro.inpcrd</span><br></pre></td></tr></table></figure>

<p>发现就是因为五聚体没加ter，换一个正常的有ter的文件receptor重新跑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">pdb4amber -i receptor.pdb -o mscl_dry.pdb -p --dry --add-missing-atoms</span><br><span class="line">pdb4amber -i mscl_dry.pdb -o mscl_noH.pdb -y</span><br><span class="line">pdb4amber -i mscl_noH.pdb -o mscl_processed.pdb</span><br><span class="line">reduce mscl_processed.pdb &gt; mscl_h.pdb</span><br><span class="line">tleap </span><br><span class="line"></span><br><span class="line">###mscl_leap.in</span><br><span class="line">source leaprc.protein.ff19SB</span><br><span class="line">source leaprc.water.tip3p</span><br><span class="line">pro = loadpdb mscl_processed.pdb</span><br><span class="line">check pro</span><br><span class="line">solvatebox pro TIP3PBOX 12.0</span><br><span class="line">savepdb pro mscl_solvate.pdb</span><br><span class="line">saveamberparm pro mscl_sol.top mscl_sol.crd</span><br><span class="line">quit</span><br><span class="line"></span><br><span class="line">tleap -f mscl_leap.in</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>1.min.in</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Minimization</span><br><span class="line">&amp;cntrl</span><br><span class="line"> imin=1,</span><br><span class="line"> irest=0,</span><br><span class="line"> maxcyc=10000,</span><br><span class="line"> ncyc=5000,</span><br><span class="line"> ntpr=100,</span><br><span class="line"> cut=8.0</span><br><span class="line">/</span><br></pre></td></tr></table></figure>

<p>2.heat_NVT.in</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Heating and NVT</span><br><span class="line">&amp;cntrl</span><br><span class="line"> imin=0, irest=0,</span><br><span class="line"> nstlim=50000, dt=0.002,</span><br><span class="line"> ntp=1, taup=2.0,</span><br><span class="line"> ntb=2,ntc=2,ntf=2,</span><br><span class="line"> ntx=1,cut=8.0,</span><br><span class="line"> ntpr=1000, ntwr=1000, ntwx=1000,</span><br><span class="line"> tempi=0.0, temp0=300, ntt=3, gamma_ln=2.0,</span><br><span class="line">/</span><br><span class="line">&amp;wt TYPE=&#x27;TEMP0&#x27;,ISTEP1=0, ISTEP2=25000,</span><br><span class="line">VALUE1=0.0, VALUE2=300.0, </span><br><span class="line">/</span><br><span class="line">&amp;wt TYPE=&#x27;END&#x27; </span><br><span class="line">/</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sander -O -i 1.min.in -o 1.min.out -p mscl_sol.top -c mscl_sol.c</span><br><span class="line">rst -ref mscl_sol.crd</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pmemd.cuda -O -i 1.min.in -o 1.min.out -c mscl_sol.crd -p mscl_sol.top -r 1.min.rst -ref mscl_sol.crd</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Warning: When compiling code please add the following flags to nvcc:</span><br><span class="line">         -gencode arch=compute_35,code=[compute_35,sm_35] \</span><br><span class="line">         -gencode arch=compute_61,code=[compute_61,sm_61] </span><br><span class="line">         -gencode arch=compute_70,code=[compute_70,sm_70] </span><br><span class="line">Note: The following floating-point exceptions are signalling: IEEE_UNDERFLOW_FLAG IEEE_DENORMAL</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pmemd.cuda -O -i 2.heat_NVT.in -o 2.heat_NVT.out -c 1.min.rst -p mscl_sol.top -r 2.heat_NVT.rst -x 2.heat_nvt.crd -inf 02_Heat.mdinfo&amp;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ERROR: Calculation halted.  Periodic box dimensions have changed too much from their initial values.</span><br><span class="line">  Your system density has likely changed by a large amount, probably from</span><br><span class="line">  starting the simulation from a structure a long way from equilibrium.</span><br><span class="line"></span><br><span class="line">  [Although this error can also occur if the simulation has blown up for some reason]</span><br><span class="line"></span><br><span class="line">  The GPU code does not automatically reorganize grid cells and thus you</span><br><span class="line">  will need to restart the calculation from the previous restart file.</span><br><span class="line">  This will generate new grid cells and allow the calculation to continue.</span><br><span class="line">  It may be necessary to repeat this restarting multiple times if your system</span><br><span class="line">  is a long way from an equilibrated density.</span><br><span class="line"></span><br><span class="line">  Alternatively you can run with the CPU code until the density has converged</span><br><span class="line">  and then switch back to the GPU code.</span><br></pre></td></tr></table></figure>

<p>在跑heat的时候报错，怀疑是gpu的问题？于是重新用sander跑了重新跑一下。实际上是自己代码的问题</p>
<h2 id="跑cMD"><a href="#跑cMD" class="headerlink" title="跑cMD"></a>跑cMD</h2><h2 id="跑GaMD"><a href="#跑GaMD" class="headerlink" title="跑GaMD"></a>跑GaMD</h2><p>cMD and GaMD equilibration</p>
<h5 id="1-gamd-equilibration-in"><a href="#1-gamd-equilibration-in" class="headerlink" title="1.gamd.equilibration.in"></a>1.gamd.equilibration.in</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nstlim = 26000000,</span><br><span class="line">irest = 0,</span><br><span class="line">ntx = 1,</span><br><span class="line"></span><br><span class="line">igamd = 3, iE = 1, irest_gamd = 0,</span><br><span class="line">ntcmd = 1000000, nteb = 25000000, ntave = 200000,</span><br><span class="line">ntcmdprep = 200000, ntebprep = 800000,</span><br><span class="line">sigma0P = 6.0, sigma0D = 6.0,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pmemd.cuda -O -i 1.gamd.equilibration.in -o 1.gamd.equilibration.out -c mscl_sol.crd -p mscl_sol.top -r 1.gamd.equilibration.rst</span><br></pre></td></tr></table></figure>

<p>指定文件输出轨迹的文件夹，不然ihome爆了会强制停掉</p>
<p>2.production</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Job #2: start GaMD production simulation</span><br><span class="line"></span><br><span class="line">&amp;cntrl</span><br><span class="line">nstlim = 50000000,</span><br><span class="line">irest = 0,</span><br><span class="line">ntx = 1,</span><br><span class="line"></span><br><span class="line">igamd = 3, iE = 1, irest_gamd = 1,</span><br><span class="line">ntcmd = 0, nteb = 0, ntave = 200000,</span><br><span class="line">ntcmdprep = 0, ntebprep = 0,</span><br><span class="line">sigma0P = 6.0, sigma0D = 6.0,</span><br><span class="line">&amp;end</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pmemd.cuda -O -i 2.gamd.production.in -o 2.gamd.production.out -c 1.gamd.equilibration.rst -p mscl_sol.top -r 2.gamd.production.rst -x 2.gamd.production.crd -inf 2.gamd.production.mdinfo</span><br></pre></td></tr></table></figure>

<p>先找tleap</p>
<p>pymol com找一下ccom bat</p>
<p>cat bat</p>
<p>pymol com_aligned 和 prot是一个文字</p>
<p>使用vi com_aligned</p>
<p>cat complex.pdb UNK删掉complex</p>
<p>close contact, 小于1.5</p>
<p>leap的键删除过于长的见</p>
<h1 id="带有lipid和离子的GaMD"><a href="#带有lipid和离子的GaMD" class="headerlink" title="带有lipid和离子的GaMD"></a>带有lipid和离子的GaMD</h1><p>GaMD&#x3D;1</p>
<h2 id="minimization"><a href="#minimization" class="headerlink" title="minimization"></a>minimization</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pmemd.cuda -O -i 1.gamd.min.in -o 1.gamd.min.out -c prmcrd -p prmtop -r 1.gamd.min.rst -inf 1.gamd.min.mdinfo</span><br></pre></td></tr></table></figure>

<h2 id="heat-amp-NVT"><a href="#heat-amp-NVT" class="headerlink" title="heat &amp; NVT"></a>heat &amp; NVT</h2><p>Error？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ERROR: Calculation halted.  Periodic box dimensions have changed too much from their initial values.</span><br><span class="line">  Your system density has likely changed by a large amount, probably from</span><br><span class="line">  starting the simulation from a structure a long way from equilibrium.</span><br><span class="line"></span><br><span class="line">  [Although this error can also occur if the simulation has blown up for some reason]</span><br><span class="line"></span><br><span class="line">  The GPU code does not automatically reorganize grid cells and thus you</span><br><span class="line">  will need to restart the calculation from the previous restart file.</span><br><span class="line">  This will generate new grid cells and allow the calculation to continue.</span><br><span class="line">  It may be necessary to repeat this restarting multiple times if your system</span><br><span class="line">  is a long way from an equilibrated density.</span><br><span class="line"></span><br><span class="line">  Alternatively you can run with the CPU code until the density has converged</span><br><span class="line">  and then switch back to the GPU code.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>根据<a target="_blank" rel="noopener" href="http://archive.ambermd.org/202006/0200.html">建议</a> modify parameter skinnb<a href="%E5%A2%9E%E5%A4%A7%E5%8F%AF%E4%BB%A5%E5%87%8F%E5%B0%91%E6%8A%A5%E9%94%99%EF%BC%8C%E4%BD%86%E6%9B%B4%E6%98%82%E8%B4%B5">^1</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Heating and NVT</span><br><span class="line">&amp;cntrl</span><br><span class="line"> imin=0, irest=0,</span><br><span class="line"> nstlim=50000, dt=0.002,</span><br><span class="line"> ntp=1, taup=2.0,</span><br><span class="line"> ntb=2,ntc=2,ntf=2,</span><br><span class="line"> ntx=1,cut=8.0,</span><br><span class="line"> ntpr=1000, ntwr=1000, ntwx=1000,</span><br><span class="line"> tempi=0.0, temp0=300, ntt=3, gamma_ln=2.0,</span><br><span class="line">/</span><br><span class="line">&amp;wt TYPE=&#x27;TEMP0&#x27;,ISTEP1=0, ISTEP2=25000,</span><br><span class="line">VALUE1=0.0, VALUE2=300.0,</span><br><span class="line">/</span><br><span class="line">&amp;wt TYPE=&#x27;END&#x27;</span><br><span class="line">/</span><br><span class="line">&amp;ewald</span><br><span class="line"> skinnb=5,</span><br><span class="line">/</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pmemd.cuda -O -i 2.gamd.heat.in -o 2.gamd.heat.out -c 1.gamd.min.rst -p prmtop -r 2.gamd.heat.rst -x 2.gamd.heat.crd -inf 2.gamd.heat.mdinfo</span><br></pre></td></tr></table></figure>

<h2 id="预处理"><a href="#预处理" class="headerlink" title="预处理"></a>预处理</h2><h3 id="第一次加热到100k"><a href="#第一次加热到100k" class="headerlink" title="第一次加热到100k"></a>第一次加热到100k</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pmemd.cuda -O -i 2.1.gamd.heat.in -o 2.1.gamd.heat.out -p prmtop -c 1.gamd.min.rst -r 2.1.gamd.heat.rst -ref 1.gamd.min.rst -x 2.1.gamd.heat.crd -inf 2.1.gamd.heat.mdinfo&amp;</span><br></pre></td></tr></table></figure>

<p>进行GaMD</p>
<p>ntave应该是总原子数的4倍，ntcmd和nteb也都要是ntave的整数倍，体系大约4万原子，设置了20万ntave，够用了</p>
<p>改成了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pmemd.cuda -O -i 3.gamd.equilibration.in -o 3.gamd.equilibration.out -c 2.gamd.heat.rst -p prmtop -r 3.gamd.equilibration.rst -x 3.gamd.equilibration.crd -inf 3.gamd.equilibration.mdinfo&amp;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pmemd.cuda -O -i 3.gamd.long.eq.in -o 3.gamd.long.eq.out -c 2.gamd.heat.rst -p prmtop -r 3.gamd.long.eq.rst -x 3.gamd.long.eq.crd -inf 3.gamd.long.eq.mdinfo</span><br></pre></td></tr></table></figure>

<p>报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unsigned long long of length = 42Failed an illegal memory access was encountered</span><br></pre></td></tr></table></figure>

<p>怀疑这里是内存爆了？因为没有写出rst文件（但感觉又不是，因为rst文件就几个M，而轨迹文件才会有几个G）</p>
<h2 id="阅读in文件重写3-eq"><a href="#阅读in文件重写3-eq" class="headerlink" title="阅读in文件重写3.eq"></a>阅读in文件重写3.eq</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/ihome/jwang/feh34/0.tutorial/1.amber_tutorial/2.GaMD/3.v3.long.GaMD_mscl_lipid/3.gamd.long.eq.in</span><br></pre></td></tr></table></figure>

<p>因为crd文件太大了，因此中途转移到、bgfs的2.modified_gamd&#x2F;，随后使用cpptraj的trajin合并.反正也不是很重要</p>
<p>3里忘记设dt&#x3D;0.002和ntf&#x3D;2了，希望影响不大</p>
<h2 id="结果处理"><a href="#结果处理" class="headerlink" title="结果处理"></a>结果处理</h2><p>生成Psi.dat Phi.dat文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># ./calc_dih.sh</span><br><span class="line">echo &quot;trajin md-1.nc</span><br><span class="line">dihedral Phi :1@C :2@N :2@CA :2@C out Phi</span><br><span class="line">dihedral Psi :2@N :2@CA :2@C :3@N out Psi&quot; &gt; dih-dia.ptraj</span><br><span class="line"></span><br><span class="line">cpptraj dip_vac.top &lt; dih-dia.ptraj</span><br><span class="line">awk &#x27;&#123;print $2&#125;&#x27; Phi | tail -n 20 &gt; Phi.dat</span><br><span class="line">awk &#x27;&#123;print $2&#125;&#x27; Psi | tail -n 20 &gt; Psi.dat</span><br><span class="line"></span><br><span class="line"># v 指定分隔符，FS是指定输入分隔符，OFS指定输出分隔符。</span><br><span class="line">#awk -v FS=&quot;,&quot; -v OFS=&quot;;&quot; &#x27;&#123;print $1,$3&#125;&#x27; test.txt</span><br><span class="line">paste Phi Psi &gt; Phi_Psi.dat</span><br><span class="line">#打开文件删除第一行 如果不使用逗号就不分隔</span><br><span class="line">awk &#x27;&#123;print $2,$4&#125;&#x27; Phi_Psi.dat &gt; Phi_Psi</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>“pmf-2D-Phi_Psi-reweight-CE2.png” normally gives the most accurate result</p>
<h2 id="结果分析"><a href="#结果分析" class="headerlink" title="结果分析"></a>结果分析</h2><p>请教何老师，认为需要知道如何解释RC1和RC2，因为可能受限于二面角，采样有限。</p>
<p>另外应该看vmd结果做个小视频理解（王老师怎么看的？）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cpptraj</span><br><span class="line">parm prmtop</span><br><span class="line">trajin 4.gamd.production.crd # 可以使用1 last 10 调整初始和结束的帧数以及步长</span><br><span class="line">reference 1.mscl.pdb [0]</span><br><span class="line">reference 4.gamd.production.crd first [1]</span><br><span class="line">reference 4.gamd.production.crd last [last]</span><br><span class="line">rms Ref :2-680&amp;!@H= ref [0] out rmsd_ref.agr</span><br><span class="line">rms Ref_1 :2-680&amp;!@H= ref [1] out rmsd_1.agr</span><br><span class="line">rms Ref_last :2-680&amp;!@H= ref [last] out rmsd_last.agr</span><br><span class="line">run</span><br><span class="line">xmgrace rmsd_ref.agr</span><br><span class="line">xmgrace rmsd_1.agr</span><br><span class="line">xmgrace rmsd_last.agr</span><br></pre></td></tr></table></figure>



<h1 id="小脚本"><a href="#小脚本" class="headerlink" title="小脚本"></a>小脚本</h1><p>想获取最后一个输出的序号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r-- 1 feh34 jwang 255 Nov 23 11:49 tleap.in</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 9.2M Nov 23 11:49 complex.pdb</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 31M Nov 23 11:49 prmtop</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 4.9M Nov 23 11:49 prmcrd</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 113 Nov 23 11:58 1.gamd.min.in</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 384 Nov 23 11:59 1.gamd.min.mdinfo</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 3.2M Nov 23 11:59 1.gamd.min.rst</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 59K Nov 23 11:59 1.gamd.min.out</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 378 Nov 23 12:50 2.gamd.heat.in</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 556 Nov 23 12:50 2.gamd.heat.mdinfo</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 6.4M Nov 23 12:50 2.gamd.heat.rst</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 77K Nov 23 12:50 2.gamd.heat.out</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 159M Nov 23 12:50 2.gamd.heat.crd</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 260 Nov 23 13:09 3.gamd.equilibration.in</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 65 Nov 23 13:54 look.sh</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 1.1K Nov 23 14:04 3.gamd.equilibration.mdinfo</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 6.4M Nov 23 14:04 3.gamd.equilibration.rst</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 105 Nov 23 14:04 gamd-restart.dat</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 39M Nov 23 14:04 3.gamd.equilibration.out</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 20K Nov 23 14:11 PyReweighting-1D.py</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 19K Nov 23 14:11 PyReweighting-2D.py</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 1.1K Nov 23 15:17 4.gamd.mdinfo</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 6.4M Nov 23 15:18 4.gamd.rst</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 49M Nov 23 15:18 4.gamd.out</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 216 Nov 23 15:23 4.gamd.in</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 216 Nov 23 15:24 5.gamd.in</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 809 Nov 23 15:31 5.v1.after4.longgamd.slurm</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 1.1K Nov 23 16:33 5.gamd.mdinfo</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 6.4M Nov 23 16:34 5.gamd.rst</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 49M Nov 23 16:34 5.gamd.out</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 216 Nov 23 16:45 6.gamd.in</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 1.1K Nov 23 17:53 6.gamd.mdinfo</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 6.4M Nov 23 17:54 6.gamd.rst</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 49M Nov 23 17:54 6.gamd.out</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 218 Nov 23 19:22 7.gamd_double.in</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 53 Nov 23 19:24 gamd.log</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 148 Nov 23 19:27 run</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 1.1K Nov 23 19:41 7.gamd_double.mdinfo</span><br><span class="line">-rw-r--r-- 1 feh34 jwang 13M Nov 23 19:42 7.gamd_double.out</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>则使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ll -tlrh | while read rows; do echo $rows; done | tail -n 1 | awk &#x27;&#123;print $9&#125;&#x27;| awk -F. &#x27;&#123;print $1+1&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>中间这里逐行输出有点脱裤子放屁了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">old=$(l -tr|tail -n 1|awk &#x27;&#123;print $9&#125;&#x27;|awk -F. &#x27;&#123;print $1&#125;&#x27;)</span><br><span class="line">new=$(($old+1)) #双括号表示运算</span><br><span class="line">cp $old.gamd.double.in $new.gamd.double.in</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://fyhan.blog.github.io/2022/10/19/%E7%A7%91%E7%A0%94-%E5%88%86%E5%AD%90%E6%A8%A1%E6%8B%9F-AMBER-2022-10-19-Gamd-01/" data-id="clc4z8jvl001tbwv2dmmt4b0m" data-title="Gamd-01" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AMBER/" rel="tag">AMBER</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AMBER/" rel="tag">AMBER</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gaussian/" rel="tag">Gaussian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MD/" rel="tag">MD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PPT/" rel="tag">PPT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chemdraw/" rel="tag">chemdraw</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gmx/" rel="tag">gmx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mae/" rel="tag">mae</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmd/" rel="tag">vmd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BD%9C%E6%9B%B2/" rel="tag">作曲</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%8B/" rel="tag">博客建立</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%91%A8%E6%8A%A5/" rel="tag">周报</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag">学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" rel="tag">环境配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E5%8F%8D%E6%80%9D/" rel="tag">生活反思</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AMBER/" style="font-size: 18px;">AMBER</a> <a href="/tags/Gaussian/" style="font-size: 10px;">Gaussian</a> <a href="/tags/MD/" style="font-size: 10px;">MD</a> <a href="/tags/PPT/" style="font-size: 10px;">PPT</a> <a href="/tags/chemdraw/" style="font-size: 10px;">chemdraw</a> <a href="/tags/gmx/" style="font-size: 16px;">gmx</a> <a href="/tags/mae/" style="font-size: 10px;">mae</a> <a href="/tags/vmd/" style="font-size: 10px;">vmd</a> <a href="/tags/%E4%BD%9C%E6%9B%B2/" style="font-size: 10px;">作曲</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%8B/" style="font-size: 10px;">博客建立</a> <a href="/tags/%E5%91%A8%E6%8A%A5/" style="font-size: 20px;">周报</a> <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 12px;">学习</a> <a href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" style="font-size: 10px;">环境配置</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E5%8F%8D%E6%80%9D/" style="font-size: 14px;">生活反思</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/12/26/%E5%91%A8%E6%8A%A5-2022-4-Quarter-2022-12-26-Weekly-blog/">Weekly blog</a>
          </li>
        
          <li>
            <a href="/2022/12/23/%E5%91%A8%E6%8A%A5-2022-4-Quarter-2022-12-23-Weekly-blog/">Weekly blog</a>
          </li>
        
          <li>
            <a href="/2022/12/21/test/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/12/15/Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/">Git版本控制</a>
          </li>
        
          <li>
            <a href="/2022/12/15/%E7%A7%91%E7%A0%94-CRC-1-basic/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 Fengyang Han<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>